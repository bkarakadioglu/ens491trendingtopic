{
    "config": {
      "view": {"continuousWidth": 600, "continuousHeight": 450}  },
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": {
      "values": [
        
      ]
    },
    "params": [
        {"name": "select", "select": "point"},
        {
          "name": "grid",
          "select": "interval",
          "bind": "scales"
        },
        {"name": "sessionLengthGt", "value": 0,
        "bind": {"input": "range", "min": 0, "max": 100, "step": 1,"name": "Session Length Longer Than  "} },
        {"name": "sessionLengthLt", "value": 400,
        "bind": {"input": "range", "min": 0, "max": 100, "step": 1,"name": "Session Length Shorter Than "} },
        {"name": "freqGt", "value": 0,
        "bind": {"input": "range", "min": 0, "max": 200, "step": 1, "name": "Frequency  "} }
        
    ],
    "transform": [
      {"flatten": ["sessionStart", "sessionEnd","sesLength","sessionMaxVolume"]},
      {"filter": {"field": "sesLength", "range": [{"expr": "sessionLengthLt"},{"expr":"sessionLengthGt"}]}},
      {"filter": {"field": "sesCount", "gt": {"expr": "freqGt"}}}
    ],
    "mark": {"type": "circle", "tooltip": true},
    "encoding": {
      "x": { 
        "field": "sessionStart", "type": "temporal",
        "timeUnit":"utcyearmonthdatehoursminutes",
        "axis": {"labelAngle": 45, "maxExtent":1000,"title":"Dates"}
      },
      "y": {
        "field": "sesLength", 
        "type": "quantitative",
        "axis": {"offset":20, "title":"Session Length" },
        "scale": {}
      },
      "color": {
        "field":"name",
        "type":"nominal",
        "legend": null
      },
      "size": {
        "field": "sesLength",
        "type": "quantitative",
        "title": "Session Length"
      },
      "tooltip": [
          {"field": "name", "type": "nominal", "title":"Name of the Trend"},
          {"field": "sessionStart", "type": "temporal","timeUnit":"utcyearmonthdatehoursminutes", "title":"Session starts at"},
          {"field": "sessionEnd", "type": "temporal","timeUnit":"utcyearmonthdatehoursminutes","title":"Session ends at"},
          {"field": "sesLength", "type": "quantitative","title":"Session length"},
          {"field": "sessionMaxVolume", "type": "quantitative","title":"Maximum volume of the session:"},
          {"field": "sesCount", "type": "quantitative", "title":"Times it became trending:"}],
      "fillOpacity": {
        "condition": {"param": "select", "value": 1},
        "value": 0.4
      },
      "strokeWidth": {
        "condition": [
          {
            "param": "select",
            "empty": false,
            "value": 2
          }
        ],
        "value": 0
      }
    }
  }